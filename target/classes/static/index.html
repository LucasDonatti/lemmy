<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		
		<!-- Axios -->
		<script src="https://unpkg.com/axios/dist/axios.min.js" ></script>
		
		<title>Lemmy Forms</title>
	</head>
	<body>
		<div class="container">
			<h1 class="display-4">Cadastro de Magia</h1>
			<form>
				<div class="row">
					<div class="col">
						<div class="form-group">
							<label for="nome" class="h6">Nome</label>
							<input type="text" name="nome" id="nome" class="form-control">
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   N O M E -->
					<div class="col">
						<div class="form-group">
							<label for="nivel" class="h6">Nível</label>
							<select id="nivel" class="form-control">
								<option value="0" selected>Truque</option>
								<option value="1">1º Nível</option>
								<option value="2">2º Nível</option>
								<option value="3">3º Nível</option>
								<option value="4">4º Nível</option>
								<option value="5">5º Nível</option>
								<option value="6">6º Nível</option>
								<option value="7">7º Nível</option>
								<option value="8">8º Nível</option>
								<option value="9">9º Nível</option>
							</select>
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   N Í V E L -->
					<div class="col">
						<div class="form-group">
							<label for="escola" class="h6">Escola</label>
								<select id="escola" class="form-control">
								<option value="ABJURAÇÃO" selected>Abjuração</option>
								<option value="ADIVINHAÇÃO">Adivinhação</option>
								<option value="CONJURAÇÃO">Conjuração</option>
								<option value="ENCANTAMENTO">Encantamento</option>
								<option value="EVOCAÇÃO">Evocação</option>
								<option value="ILUSÃO">Ilusão</option>
								<option value="NECROMANCIA">Necromancia</option>
								<option value="TRANSMUTAÇÃO">Transmutação</option>
							</select>
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   E S C O L A -->
				</div>
				<!-- F I M   D A   1 ª   L I N H A -->
				<div class="row">
					<div class="col">
						<label for="ritual" class="h6">Ritual</label>
						<div class="form-group">
							<div class="form-check-inline">
								<input class="form-check-input" type="radio" name="ritual" id="ritualFalse" value="false" checked>
								<label class="form-check-label" for="ritualFalse">Não</label>
							</div>
							<div class="form-check-inline">
								<input class="form-check-input" type="radio" name="ritual" id="ritualTrue" value="true">
								<label class="form-check-label" for="ritualTrue">Sim</label>
							</div>
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   R I T U A L -->
					<div class="col">
						<label for="concentracao" class="h6">Concentração</label>
						<div class="form-group">
							<div class="form-check-inline">
								<input class="form-check-input" type="radio" name="concentracao" id="concentracaoFalse" value="false" checked>
								<label class="form-check-label" for="concentracaoFalse">Não</label>
							</div>
							<div class="form-check-inline">
								<input class="form-check-input" type="radio" name="concentracao" id="concentracaoTrue" value="true">
								<label class="form-check-label" for="concentracaoTrue">Sim</label>
							</div>
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   C O N C E N T R A Ç Ã O -->
					<div class="col">
						<label for="componentes" class="h6">Componentes</label>
						<div class="form-group">
							<div class="form-check-inline">
								<input class="form-check-input" type="checkbox" name="componentes" id="compVerbal" value="V">
								<label class="form-check-label" for="compVerbal">V</label>
							</div>
							<div class="form-check-inline">
								<input class="form-check-input" type="checkbox" name="componentes" id="compSomatico" value="S">
								<label class="form-check-label" for="compSomatico">S</label>
							</div>
							<div class="form-check-inline">
								<input class="form-check-input" type="checkbox" name="componentes" id="compMaterial" value="M">
								<label class="form-check-label" for="compMaterial">M</label>
							</div>
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   C O M P O N E N T E S -->
				</div>
				<!-- F I M   D A   2 ª   L I N H A -->
				<div class="form-group">
					<label for="material" class="h6">Material</label>
					<textarea name="material" id="material" class="form-control" rows="2"></textarea>
				</div>
				<!-- F I M   D O   C A M P O   M A T E R I A L -->
				<div class="row">
					<div class="col">
						<div class="form-group">
							<label for="tempoDeConjuracao" class="h6">Tempo de Conjuração</label>
							<input type="text" name="tempoDeConjuracao" id="tempoDeConjuracao" class="form-control">
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   T E M P O   D E   C O N J U R A Ç Ã O -->
					<div class="col">
						<div class="form-group">
							<label for="alcance" class="h6">Alcance</label>
							<input type="text" name="alcance" id="alcance" class="form-control">
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   A L C A N C E -->
					<div class="col">
						<div class="form-group">
							<label for="duracao" class="h6">Duração</label>
							<input type="text" name="duracao" id="duracao" class="form-control">
						</div>
					</div>
					<!-- F I M   D A   C O L U N A   D U R A Ç Ã O -->
				</div>
				<!-- F I M   D A   3 ª   L I N H A -->
				<div class="form-group">
					<label for="descricao" class="h6">Descrição</label>
					<textarea name="descricao" id="descricao" class="form-control" rows="10"></textarea>
				</div>
				<!-- F I M   D O   C A M P O   D E S C R I Ç Ã O -->
				<div class="form-group">
					<label for="niveisAcima" class="h6">Níveis Acima</label>
					<textarea name="niveisAcima" id="niveisAcima" class="form-control" rows="5"></textarea>
				</div>
				<!-- F I M   D O   C A M P O   N Í V E I S   A C I M A -->
				<button type="button" class="btn btn-primary btn-lg btn-block" onclick="postAoClicar()">Adicionar Magia</button>
			</form>
		</div>
		<!-- F I M   D O   C O N T A I N E R -->
	</body>
	<script type="text/javascript">
		
		function postAoClicar() {
			
			let nome = document.querySelector('#nome').value
			let alcance = document.querySelector('#alcance').value
			let duracao = document.querySelector('#duracao').value
			let tempoDeConjuracao = document.querySelector('#tempoDeConjuracao').value
			let nivel = document.querySelector('#nivel').value
			let escola = document.querySelector('#escola').value
			let componentes = []
			let buscarComponentes = document.querySelectorAll('input[name="componentes"]:checked')
			for(let i = 0; i < buscarComponentes.length; i++) {
				componentes[i] = buscarComponentes[i].value
			}
			let material = document.querySelector('#material').value
			let ritual = document.querySelector('input[name="ritual"]:checked').value
			let concentracao = document.querySelector('input[name="concentracao"]:checked').value
			let descricao = document.querySelector('#descricao').value.split('\n')
			let niveisAcima = document.querySelector('#niveisAcima').value.split('\n')
			
			console.log('             nome: ' + nome)
			console.log('          alcance: ' + alcance)
			console.log('          duracao: ' + duracao)
			console.log('tempoDeConjuracao: ' + tempoDeConjuracao)
			console.log('            nivel: ' + nivel)
			console.log('           escola: ' + escola)
			for(let i = 0; i < componentes.length; i++) {
				console.log('   componentes['+i+']: ' + componentes[i])
			}
			console.log('         material: ' + material)
			console.log('           ritual: ' + ritual)
			console.log('     concentracao: ' + concentracao)
			for(let i = 0; i < descricao.length; i++) {
				console.log('     descricao['+i+']: ' + descricao[i])
			}
			for(let i = 0; i < niveisAcima.length; i++) {
				console.log('   niveisAcima['+i+']: ' + niveisAcima[i])
			}
			
			axios.post('http://localhost:3035/api/magias', {
				nome: nome,
				descricao: descricao,
				niveisAcima: niveisAcima,
				alcance: alcance,
				componentes: componentes,
				material: material,
				ritual: ritual,
				duracao: duracao,
				concentracao: concentracao,
				tempoDeConjuracao: tempoDeConjuracao,
				nivel: nivel,
				escola: escola,
				classes: ['AAAAA'] // classes AAAAA temporariamente para não realizar o POST
			}).then(response => { console.log(response.data) })
			.catch(erro => { console.log(erro) })
		}
		
	</script>
</html>